port: 7890
socks-port: 7891
allow-lan: true
mode: Rule
log-level: info
external-controller: :9090

hosts:
  # '*.clash.dev': 127.0.0.1
  # '.dev': 127.0.0.1
  # 'alpha.clash.dev': '::1'
  'mtalk.google.com': 10.0.0.1
  'dl.google.com': 10.0.0.1
  'dl.l.google.com': 10.0.0.1
  'youtube.com': 10.0.0.1

dns:
  enable: true                   # set true to enable dns (default is false)
  ipv6: false                    # default is false
  listen: 0.0.0.0:53
# nameserver-policy:             # lookup domain through assigned nameserver
  # 'www.baidu.com': '114.114.114.114'
  # '+.internal.crop.com': '10.0.0.1'
  default-nameserver:            # resolve dns nameserver host, should fill pure IP
                                 # aka Bootstrap DNS
    - 9.9.9.9
    - tcp://1.1.1.1
    - 1.0.0.1
    - 149.112.112.10
    - 93.190.24.119
    - tls://dns.rubyfish.cn:853  # dns over tls
    - https://1.0.0.1/dns-query  # dns over https
    - dhcp://en0 # dns from dhcp
    - '8.8.8.8#en0' # specific interface for nameserver

  enhanced-mode: redir-host      # or fake-ip
  fake-ip-range: 198.18.0.1/16   # if you don't know what it is, don't change it
  use-hosts: true                # lookup hosts and return IP record
  fake-ip-filter:                # fake ip white domain list, aka Always Real IP
    - '*.lan'
    - localhost.ptlogin2.qq.com
  nameserver:
    - tcp://1.1.1.1
    - 9.9.9.9
    - 1.0.0.1
    - 149.112.112.10
    - 93.190.24.119
    - tls://dns.rubyfish.cn:853  # dns over tls
    - https://1.0.0.1/dns-query  # dns over https
    - dhcp://en0 # dns from dhcp
    - '8.8.8.8#en0' # specific interface for nameserver
  fallback:                      # concurrent request with nameserver, 
                         # fallback used when GEOIP country isn't CN
    - tcp://1.1.1.1
    - 9.9.9.9
    - 1.0.0.1
    - 149.112.112.10
    - 93.190.24.119
    - tls://dns.rubyfish.cn:853  # dns over tls
    - https://1.0.0.1/dns-query  # dns over https
    - dhcp://en0 # dns from dhcp
    - '8.8.8.8#en0' # specific interface for nameserver

  fallback-filter:
    geoip: true                  # default
    geoip-code: IR
    
    ipcidr:                      # ips in these subnets will be considered polluted
      - 10.0.0.0/8
   #domain:
    # - '+.google.com'
    # - '+.facebook.com'
    # - '+.youtube.com'

proxies:

proxy-groups:
  - name: 🔥 grop
    type: url-test
    url: 'http://www.google.com'
    interval: 300
    use:
      - others

proxy-providers:
  others:
    type: http
    url: "https://raw.githubusercontent.com/aghilechresh/aghilechresh.vpn.clash/main/my_clash_base.yml.txt"
    path: sspool.herokuapp.com/provider-others.yaml
    health-check:
      enable: true
      interval: 300
      url: 'https://www.google.com'
      
rules-providers:
# name: # Provider 名称
#   type: http # http 或 file
#   behavior: classical # 或 ipcidr、domain
#   path: # 文件路径
#   url: # 只有当类型为 HTTP 时才可用，您不需要在本地空间中创建新文件。
#   interval: # 自动更新间隔，仅在类型为 HTTP 时可用

  Unbreak:
    type: http
    behavior: domain
    path: RuleSet/Unbreak.yaml
    url: https://raw.githubusercontent.com/aghilechresh/aghilechresh.vpn.clash/main/Google%2C%20DIRECT.yaml
    interval: 8700

profile:
    tracing: true

interface-name: en0

tun:
  enable: true
  stack: system
  dns-hijack:
    - any:53
  auto-redir: true
  auto-route: true

ebpf:
  redirect-to-tun:
    - eth0

script:
  shortcuts:
    quic: network == 'udp' and dst_port == 443

rules:
  #- SCRIPT,quic,DIRECT
  - RULE-SET,Unbreak,DIRECT,no-resolve
  # Local Area Network
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,🔥 grop
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,127.0.0.0/8,🔥 grop
  - IP-CIDR,100.64.0.0/10,DIRECT
  - IP-CIDR,224.0.0.0/4,DIRECT
  - IP-CIDR,fe80::/10,🔥 grop

  - DST-PORT,80,DIRECT
  - SRC-PORT,7777,DIRECT

  - DOMAIN-KEYWORD,GitHub,DIRECT

  - GEOIP,IR,DIRECT
  - GEOIP,CN,🔥 grop

  - MATCH,🔥 grop
